---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# dtlg

<!-- badges: start -->
[![](https://www.r-pkg.org/badges/version/dtlg)](https://cran.r-project.org/package=dtlg)
[![R-CMD-check](https://github.com/AscentSoftware/dtlg/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/AscentSoftware/dtlg/actions/workflows/R-CMD-check.yaml)
[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://cran.r-project.org/web/licenses/MIT)
[![](http://cranlogs.r-pkg.org/badges/last-month/dtlg)](https://cran.r-project.org/package=dtlg)
<!-- badges: end -->

Create high-performance clinical reporting tables (TLGs) from ADaM-like inputs.
The package provides a consistent, programmatic API to generate common tables
such as demographics, adverse event incidence, and laboratory summaries, using
'data.table' for fast aggregation over large populations. Functions support
flexible target-variable selection, stratification by treatment, and
customizable summary statistics, and return tidy, machine-readable results ready
to render with downstream table/formatting packages in analysis pipelines.

## Installation

``` r
install.packages("dtlg")
```

## Example

Creating an AET01 table:

```{r}
library(dtlg)

head(adsl[, c("USUBJID", "ARM")])

head(aesi[, c("USUBJID", "ARM", "FATAL")])

AET01 <-
  AET01_table(
    adsl = adsl,
    adae = aesi,
    patient_var = "USUBJID",
    treat_var = "ARM",
    aesi_vars = c("FATAL", "SER", "SERWD", "SERDSM", "RELSER",
                  "WD", "DSM", "REL", "RELWD", "RELDSM", "SEV")
  )

AET01[, stats := strtrim(stats, 35)][]
```

